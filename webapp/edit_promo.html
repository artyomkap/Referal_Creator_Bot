<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <video playsinline autoplay muted loop poster="">
        <source src="/media/videos/244fb7b9916aed280fa86e465ba74e2b.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <div class="container">
        <div class="base-promocode">
            <p><span class="label">–ù–∞–∑–≤–∞–Ω–∏–µ: </span><span class="value" id="promocode_name">...</span></p>
            <p><span class="label">–¢–∏–ø –ø—Ä–æ–º–æ–∫–æ–¥–∞: </span><span class="value" id="promocode_type">...</span></p>
            <p><span class="label">–í–æ—Ä–∫–µ—Ä: </span><span class="value" id="user_id">...</span></p>
        </div>
        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ -->
        <h1 class="notifications-label">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–º</h1>
        <div class='promo-edit' id="promo-settings">
            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É–¥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ -->
        </div>



        <!-- –ú–µ–Ω—é -->
        <div class="menu">
            <a id="home-link" href="index.html">
                <img src="/media/images/free-icon-font-money-check-7928280 1.svg" alt="Promocode Icon">
            </a>
            <a id="promocode-link" href="">
                <img src="/media/images/free-icon-font-shield-check-3917625 1.svg" alt="Security Icon">
            </a>
            <a id="bag-link" href="#bag">
                <img src="/media/images/free-icon-font-briefcase-3916670 1.svg" alt="Bag Icon">
            </a>
            <a id="scroll-link" href="#scroll">
                <img src="/media/images/free-icon-font-list-3917113 1.svg" alt="Scroll Icon">
            </a>
        </div>
    </div>

    <script>
        const params1 = new URLSearchParams(window.location.search);
        const id = params1.get('id');

        // –ï—Å–ª–∏ id —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
        if (id) {
            document.getElementById('home-link').href = `/?id=${id}`;
            document.getElementById('promocode-link').href = `../promocode.html/?id=${id}`;
            document.getElementById('bag-link').href = `../admins.html/?id=${id}`;
            document.getElementById('scroll-link').href = `../information.html/?id=${id}`;
        }
    </script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const promocodeId = params.get('promocodeId');
        

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
        async function loadPromocode() {
            const params1 = new URLSearchParams(window.location.search);
            const user_id = params1.get('id');
            try {
                if (promocodeId) {
                    // –ó–∞–ø—Ä–æ—Å –∫ –≤–∞—à–µ–º—É API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–º–æ–∫–æ–¥–µ
                    const response = await fetch(`/promocode/${promocodeId}`);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
                    if (!response.ok) {
                        throw new Error(`–û—à–∏–±–∫–∞ HTTP: ${response.status}`);
                    }

                    const data = await response.json();
                    const type = data.type;
                    let typeText;
                    if (type === 1) {
                        typeText = 'Cinema';
                        loadAntiKinoSettings();
                    }
                    if (type === 2) {
                        typeText = 'Theatre';
                        loadAntiTheatreSettings();
                    } 
                    if (type === 3) {
                        typeText = 'Exhibitions';
                        loadExhibitionSettings();
                    } if  (type === 4) {
                        typeText = '–¢rade';
                        loadTradeSettings();
                    } if (type === 5) {
                        typeText = 'BlaBlaCar';
                        loadBlaBlaCarSettings();
                    }
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ HTML —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞
                    document.getElementById('promocode_name').textContent = data.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                    document.getElementById('promocode_type').textContent = typeText || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                    document.getElementById('user_id').textContent = user_id || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
                } else {
                    console.error('–ü—Ä–æ–º–æ–∫–æ–¥ ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö URL');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', error);
            }
        }

        loadPromocode();

        async function loadAntiKinoSettings() {
            const container = document.getElementById('promo-settings');
            const params = new URLSearchParams(window.location.search);
            const promocodeId = params.get('promocodeId');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            let config;
            try {
                const response = await fetch(`/promocode/${promocodeId}`);
                const promocodeData = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', promocodeData);

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
                try {
                    config = JSON.parse(promocodeData.config);
                    console.log('–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:', config);
                } catch (jsonError) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', jsonError);
                    alert('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏');
                    return;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                return;
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            container.innerHTML = `
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä</h2>
                <label>–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞</label>
                <select id="country">
                    <option value="UE">–£–∫—Ä–∞–∏–Ω–∞ UE</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="EU">–ï–≤—Ä–æ–ø–∞ EU</option>
                </select>
                <label>–Ø–∑—ã–∫ —Å–∞–π—Ç–∞</label>
                <select id="language">
                    <option value="RU">–†–æ—Å—Å–∏—è RU</option>
                    c
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="PL">–ü–æ–ª—å—Å–∫–∏–π PL</option>
                    <option value="EN">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π EN</option>
                </select>
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="currency">
                    <option value="RUB">RUB</option>
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="UAH">UAH</option>
                    <option value="KZT">KZT</option>
                    <option value="AZN">AZN</option>
                    <option value="PLN">PLN</option>
                </select>
                <button class="save-button" id="saveSettingsAntikino">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button>–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                <div class="modal-block">
                    <button class="open-modal" data-modal="address">–ò–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å –∏ —Ü–µ–Ω—É</button>
                    <div class="modal modal-address">
                        <div class="modal-content">
                            <span class="close">X</span>
                            <label for="room-select">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–Ω–∞—Ç—É:</label>
                            <select id="room-select">
                                <option value="0">–ö–æ–º–Ω–∞—Ç–∞ 1</option>
                                <option value="1">–ö–æ–º–Ω–∞—Ç–∞ 2</option>
                                <option value="2">–ö–æ–º–Ω–∞—Ç–∞ 3</option>
                            </select>
                            <input type="text" id="new-address" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å">
                            <input type="number" id="new-price" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Ü–µ–Ω—É">
                            
                            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥ -->
                            <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</h3>
                            <div class='service_list' id="service-list"></div>

                            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏ -->
                            <button id="show-add-service-btn">+ –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>

                            <!-- –ü–æ–ª—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏, —Å–∫—Ä—ã—Ç—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                            <div id="add-service-container" style="display: none;">
                                <input type="text" id="new-service-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏">
                                <input type="number" id="new-service-price" placeholder="–¶–µ–Ω–∞ —É—Å–ª—É–≥–∏">
                                <button id="save-service-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Å–ª—É–≥—É</button>
                            </div>

                            <button class="save" data-modal="address">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            `;

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
            document.getElementById('country').value = config.country;
            document.getElementById('language').value = config.language;
            document.getElementById('currency').value = config.currency;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–Ω–∞—Ç –≤ –∫–æ–Ω—Ñ–∏–≥–µ
            const roomSelect = document.getElementById('room-select');
            const addressInput = document.getElementById('new-address');
            const priceInput = document.getElementById('new-price');
            
            if (config.rooms && config.rooms.length > 0) {
                console.log('–ö–æ–º–Ω–∞—Ç—ã –Ω–∞–π–¥–µ–Ω—ã:', config.rooms);

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                setRoomData(0);

                roomSelect.addEventListener('change', function () {
                    const selectedRoomIndex = roomSelect.value;
                    console.log('–í—ã–±—Ä–∞–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞:', selectedRoomIndex);
                    setRoomData(selectedRoomIndex);
                });

                function setRoomData(roomIndex) {
                    const room = config.rooms[roomIndex];
                    if (room) {
                        console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã:', room);
                        addressInput.value = room.address || '';
                        priceInput.value = room.price || '';
                        renderServices(room.services || []); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —É—Å–ª—É–≥–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
                    } else {
                        console.warn(`–ö–æ–º–Ω–∞—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º ${roomIndex} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
                        addressInput.value = '';
                        priceInput.value = '';
                    }
                }
            } else {
                console.warn('–ö–æ–º–Ω–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ');
                addressInput.value = '';
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('saveSettingsAntikino').addEventListener('click', async () => {
                const country = document.getElementById('country').value;
                const language = document.getElementById('language').value;
                const currency = document.getElementById('currency').value;

                const settingsData = {
                    country: country,
                    language: language,
                    currency: currency
                };

                try {
                    const response = await fetch(`/promocodeUpdateAntikino/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.querySelectorAll('.open-modal').forEach(button => {
                button.addEventListener('click', function () {
                    const modalType = this.getAttribute('data-modal');
                    document.querySelector(`.modal-${modalType}`).style.display = 'block';
                });
            });

            document.querySelectorAll('.close').forEach(button => {
                button.addEventListener('click', function () {
                    this.closest('.modal').style.display = 'none';
                });
            });

            window.addEventListener('click', function (event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });

            let services = [];
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å–ª—É–≥ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            // –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ renderServices
            function renderServices(services) {
                const serviceList = document.getElementById('service-list');
                serviceList.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Å–ª—É–≥–∏

                services.forEach((service, index) => {
                    const serviceElement = document.createElement('div');
                    serviceElement.classList.add('service-item');
                    serviceElement.innerHTML = `
                        <span>${service.name}: ${service.price}</span>
                        <button class="delete-service" data-index="${index}">üóëÔ∏è</button>
                    `;
                    serviceList.appendChild(serviceElement);

                    // –õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∏
                    serviceElement.querySelector('.delete-service').addEventListener('click', async function () {
                        const serviceIndex = parseInt(this.getAttribute('data-index')); // –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞
                        const serviceName = services[serviceIndex].name; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è —É—Å–ª—É–≥–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

                        // –£–¥–∞–ª—è–µ–º —É—Å–ª—É–≥—É –∏–∑ –º–∞—Å—Å–∏–≤–∞
                        services.splice(serviceIndex, 1); 
                        renderServices(services); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —É—Å–ª—É–≥–∏

                        // –£–¥–∞–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                        try {
                            const response = await fetch(`/promocodeDeleteAntikinoService/${promocodeId}`, {
                                method: 'POST', // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ POST
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ room: serviceIndex, name: serviceName }) // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∏–º—è —É—Å–ª—É–≥–∏
                            });

                            if (!response.ok) {
                                throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥–∏');
                            }

                            const result = await response.json();
                            console.log('–£—Å–ª—É–≥–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞:', result);
                            alert('–£—Å–ª—É–≥–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞!');

                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞:', error);
                            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥–∏: ' + error.message);
                        }
                    });

                });
            }


            // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏
            const showAddServiceBtn = document.getElementById('show-add-service-btn');
            const addServiceContainer = document.getElementById('add-service-container');
            const saveServiceBtn = document.getElementById('save-service-btn');

            showAddServiceBtn.addEventListener('click', () => {
                addServiceContainer.style.display = 'block';
                showAddServiceBtn.style.display = 'none';
            });

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏
            saveServiceBtn.addEventListener('click', async function () {
                const roomIndex = document.getElementById('room-select').value;
                const serviceName = document.getElementById('new-service-name').value;
                const servicePrice = document.getElementById('new-service-price').value;

                if (serviceName && servicePrice) {
                    const newService = {
                        room: roomIndex,
                        name: serviceName,
                        price: servicePrice
                    }
                    config.rooms[roomIndex].services = config.rooms[roomIndex].services || [];
                    config.rooms[roomIndex].services.push(newService);
                    renderServices(config.rooms[roomIndex].services); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
                    try {
                    const response = await fetch(`/promocodeUpdateAntikinoServices/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(newService)
                    });

                    if (!response.ok) {
                        throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö');
                    }

                    const result = await response.json();
                    console.log('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:', result);
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');

                    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    document.querySelector(`.modal-address`).style.display = 'none';

                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
                }
                    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
                    document.getElementById('new-service-name').value = '';
                    document.getElementById('new-service-price').value = '';

                    // –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∏
                    addServiceContainer.style.display = 'none';
                    showAddServiceBtn.style.display = 'block';
                } else {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                }
            });

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞
            document.querySelector('.save[data-modal="address"]').addEventListener('click', async function () {
                const selectedRoomIndex = document.getElementById('room-select').value;
                const newAddress = document.getElementById('new-address').value;
                const newPrice = document.getElementById('new-price').value;

                const payload = {
                    roomIndex: selectedRoomIndex,
                    address: newAddress,
                    price: newPrice,
                    services: config.rooms[selectedRoomIndex].services // –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏
                };

                try {
                    const response = await fetch(`/promocodeUpdateAntikinoRoom/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö');
                    }

                    const result = await response.json();
                    console.log('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:', result);
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');

                    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    document.querySelector(`.modal-address`).style.display = 'none';

                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
                }
            });
        }


        async function loadAntiTheatreSettings() {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            window.openModal = function(modalSelector) {
                const modal = document.querySelector(modalSelector);
                if (modal) {
                    modal.style.display = "block";
                }
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            window.closeModal = function(modalSelector) {
                const modal = document.querySelector(modalSelector);
                if (modal) {
                    modal.style.display = "none";
                }
            }

            const container = document.getElementById('promo-settings');
            const params = new URLSearchParams(window.location.search);
            const promocodeId = params.get('promocodeId');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            let config;
            try {
                const response = await fetch(`/promocode/${promocodeId}`);
                const promocodeData = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', promocodeData);

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
                try {
                    config = JSON.parse(promocodeData.config);
                    console.log('–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:', config);
                } catch (jsonError) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', jsonError);
                    alert('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏');
                    return;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                return;
            }

            container.innerHTML = `
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢–µ–∞—Ç—Ä–∞</h2>
                <label>–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞</label>
                <select id="country">
                    <option value="UE">–£–∫—Ä–∞–∏–Ω–∞ UE</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="EU">–ï–≤—Ä–æ–ø–∞ EU</option>
                </select>
                <label>–Ø–∑—ã–∫ —Å–∞–π—Ç–∞</label>
                <select id="language">
                    <option value="RU">–†–æ—Å—Å–∏—è RU</option>
                    <option value="UE">–£–∫—Ä–∞–∏–Ω–∞ UE</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="PL">–ü–æ–ª—å—Å–∫–∏–π PL</option>
                    <option value="EN">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π EN</option>
                </select>
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="currency">
                    <option value="RUB">RUB</option>
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="UAH">UAH</option>
                    <option value="KZT">KZT</option>
                    <option value="AZN">AZN</option>
                    <option value="PLN">PLN</option>
                </select>
                <button class="save-button" id="saveSettingsAntiTheatre">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω -->
                <button id="openPricesModal">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–Ω—ã</button>
                <button id="openSeatsModal">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞</button>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω -->
                <div class="modal modal-prices" style="display:none;">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal('.modal-prices')">X</span>
                        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω</h2>
                        <div>
                            <label for="price-row-1">–¶–µ–Ω–∞ 1st:</label>
                            <input type="number" id="price-row-1" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" />
                        </div>
                        <div>
                            <label for="price-row-2">–¶–µ–Ω–∞ 2nd:</label>
                            <input type="number" id="price-row-2" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" />
                        </div>
                        <div>
                            <label for="price-row-3">–¶–µ–Ω–∞ 3rd:</label>
                            <input type="number" id="price-row-3" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" />
                        </div>
                        <div>
                            <label for="price-loja">–¶–µ–Ω–∞ VIP:</label>
                            <input type="number" id="price-loja" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" />
                        </div>
                        <button id="savePricesSettings">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </div>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç -->
                <div class="modal modal-seats" style="display:none;">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal('.modal-seats')">X</span>
                        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç</h2>
                        <div>
                            <label for="seats-slider">–°–≤–æ–±–æ–¥–Ω–æ—Å—Ç—å –º–µ—Å—Ç (%): <span id="seats-value">50</span>%</label>
                            <input type="range" id="seats-slider" min="0" max="100" value="50" />
                        </div>
                        <button id="saveSeatsSettings">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </div>
            `;

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
            document.getElementById('country').value = config.country;
            document.getElementById('language').value = config.language;
            document.getElementById('currency').value = config.currency;
            const prices = config.prices;
            document.getElementById('price-row-1').value = prices["1st"];
            document.getElementById('price-row-2').value = prices["2nd"];
            document.getElementById('price-row-3').value = prices["3rd"];
            document.getElementById('price-loja').value = prices["Vip"];
            const seatsSlider = document.getElementById('seats-slider');
            seatsSlider.value = config.seats; // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞
            document.getElementById('seats-value').innerText = config.seats;

            async function savePricesSettings() {
                const prices = {
                    "1st": parseInt(document.getElementById('price-row-1').value) || 0,
                    "2n": parseInt(document.getElementById('price-row-2').value) || 0,
                    "3rd": parseInt(document.getElementById('price-row-3').value) || 0,
                    "Vip": parseInt(document.getElementById('price-loja').value) || 0
                };

                const settingsData = { prices: prices }; // –û–±–µ—Ä–Ω–∏—Ç–µ prices –≤ –æ–±—ä–µ–∫—Ç

                try {
                    const response = await fetch(`/updatePricesTheatre/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData) // –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                        closeModal('.modal-prices'); // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç
            async function saveSeatsSettings() {
                const seats = parseInt(document.getElementById('seats-slider').value) || 0;

                const settingsData = { seats: seats };

                try {
                    const response = await fetch(`/updateSeatsTheatre/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                        closeModal('.modal-seats'); // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            }

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            document.getElementById('savePricesSettings').addEventListener('click', savePricesSettings);
            document.getElementById('saveSeatsSettings').addEventListener('click', saveSeatsSettings);


            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('saveSettingsAntiTheatre').addEventListener('click', async () => {
                const country = document.getElementById('country').value;
                const language = document.getElementById('language').value;
                const currency = document.getElementById('currency').value;

                const settingsData = {
                    country: country,
                    language: language,
                    currency: currency
                };

                try {
                    const response = await fetch(`/promocodeUpdateAntikino/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞
            document.getElementById('seats-slider').addEventListener('input', function() {
                document.getElementById('seats-value').innerText = this.value;
            });

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.getElementById('openPricesModal').addEventListener('click', () => openModal('.modal-prices'));
            document.getElementById('openSeatsModal').addEventListener('click', () => openModal('.modal-seats'));
        }


        async function loadExhibitionSettings() {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            window.openModal = function(modalSelector) {
                const modal = document.querySelector(modalSelector);
                if (modal) {
                    modal.style.display = "block";
                }
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            window.closeModal = function(modalSelector) {
                const modal = document.querySelector(modalSelector);
                if (modal) {
                    modal.style.display = "none";
                }
            }

            const container = document.getElementById('promo-settings');
            const params = new URLSearchParams(window.location.search);
            const promocodeId = params.get('promocodeId');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            let config;
            try {
                const response = await fetch(`/promocode/${promocodeId}`);
                const promocodeData = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', promocodeData);

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
                try {
                    config = JSON.parse(promocodeData.config);
                    console.log('–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:', config);
                } catch (jsonError) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', jsonError);
                    alert('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏');
                    return;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                return;
            }

            container.innerHTML = `
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –í—ã—Å—Ç–∞–≤–∫–∏</h2>
                <label>–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞</label>
                <select id="country">
                    <option value="UE">–£–∫—Ä–∞–∏–Ω–∞ UE</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="EU">–ï–≤—Ä–æ–ø–∞ EU</option>
                </select>
                <label>–Ø–∑—ã–∫ —Å–∞–π—Ç–∞</label>
                <select id="language">
                    <option value="RU">–†–æ—Å—Å–∏—è RU</option>
                    <option value="UE">–£–∫—Ä–∞–∏–Ω–∞ UE</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω AZ</option>
                    <option value="PL">–ü–æ–ª—å—Å–∫–∏–π PL</option>
                    <option value="EN">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π EN</option>
                </select>
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="currency">
                    <option value="RUB">RUB</option>
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="UAH">UAH</option>
                    <option value="KZT">KZT</option>
                    <option value="AZN">AZN</option>
                    <option value="PLN">PLN</option>
                </select>
                <button class="save-button" id="saveSettingsAntiExhibition">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button id="openExhibitionModal">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—ã—Å—Ç–∞–≤–∫–∏</button>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–æ–∫ -->
                <div class="modal modal-exhibition" style="display:none;">
                    <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
                        <span class="close" onclick="closeModal('.modal-exhibition')">X</span>
                        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã—Å—Ç–∞–≤–æ–∫</h2>
                        <div id="exhibition-list">
                            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤—ã—Å—Ç–∞–≤–∫–∏ -->
                        </div>
                        <button id="addExhibition">–î–æ–±–∞–≤–∏—Ç—å –≤—ã—Å—Ç–∞–≤–∫—É</button>
                        <button id="saveExhibitions">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã—Å—Ç–∞–≤–∫–∏</button>
                    </div>
                </div>
            `;

            document.getElementById('country').value = config.country;
            document.getElementById('language').value = config.language;
            document.getElementById('currency').value = config.currency;
            

            
            let exhibitionCount = config.exhibitions ? config.exhibitions.length : 0;

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤—ã—Å—Ç–∞–≤–æ–∫ –∫–∞–∫ —Ç–µ–∫—Å—Ç–∞
            function renderExhibitions(exhibitions) {
                const exhibitionList = document.getElementById('exhibition-list');
                exhibitionList.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤—ã—Å—Ç–∞–≤–æ–∫
                exhibitions.forEach((exhibition, index) => {
                    const exhibitionDiv = document.createElement('div');
                    exhibitionDiv.className = 'exhibition-item';
                    exhibitionDiv.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3>–í—ã—Å—Ç–∞–≤–∫–∞ ${index + 1}</h3>
                                <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> ${exhibition.name}</p>
                                <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${exhibition.description}</p>
                                <p><strong>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</strong> ${exhibition.price}</p>
                                <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –±–∏–ª–µ—Ç–æ–≤:</strong> ${exhibition.tickets}</p>
                            </div>
                            <button class="remove-exhibition" data-index="${index}">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    `;
                    exhibitionList.appendChild(exhibitionDiv);

                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–∫–∏
                    exhibitionDiv.querySelector('.remove-exhibition').addEventListener('click', async () => {
                        const confirmed = confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –≤—ã—Å—Ç–∞–≤–∫—É?");
                        if (confirmed) {
                            const indexToRemove = exhibitionDiv.querySelector('.remove-exhibition').dataset.index;

                            // –£–¥–∞–ª—è–µ–º –≤—ã—Å—Ç–∞–≤–∫—É –ª–æ–∫–∞–ª—å–Ω–æ
                            exhibitionDiv.remove();
                            exhibitionCount--;

                            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã—Å—Ç–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                            try {
                                const response = await fetch(`/removeExhibition/${promocodeId}`, {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ index: parseInt(indexToRemove) }) // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
                                });

                                const result = await response.json();
                                if (response.ok) {
                                    alert("–í—ã—Å—Ç–∞–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞");
                                } else {
                                    alert("–û—à–∏–±–∫–∞: " + result.message);
                                }
                            } catch (error) {
                                alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                            }
                        }
                    });
                });
            }

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –≤—ã—Å—Ç–∞–≤–æ–∫
            document.getElementById('openExhibitionModal').addEventListener('click', () => {
                renderExhibitions(config.exhibitions || []); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–æ–∫
                openModal('.modal-exhibition');
            });

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –≤—ã—Å—Ç–∞–≤–∫–∏
            function addExhibition() {
                if (exhibitionCount >= 3) {
                    alert("–ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ 3 –≤—ã—Å—Ç–∞–≤–æ–∫");
                    return;
                }

                exhibitionCount++;
                const exhibitionList = document.getElementById('exhibition-list');
                const exhibitionDiv = document.createElement('div');
                exhibitionDiv.className = 'exhibition-item';
                exhibitionDiv.innerHTML = `
                    <h3>–í—ã—Å—Ç–∞–≤–∫–∞ ${exhibitionCount}</h3>
                    <label>URL —Ñ–æ—Ç–æ:</label>
                    <input type="text" class="exhibition-photo" placeholder="–í–≤–µ–¥–∏—Ç–µ URL —Ñ–æ—Ç–æ" />
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                    <input type="text" class="exhibition-title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" />
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea class="exhibition-description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                    <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</label>
                    <input type="number" class="exhibition-price" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É" />
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –±–∏–ª–µ—Ç–æ–≤:</label>
                    <input type="number" class="exhibition-tickets" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ" />
                `;
                exhibitionList.appendChild(exhibitionDiv);
            }

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≤—ã—Å—Ç–∞–≤–∫–∏
            document.getElementById('addExhibition').addEventListener('click', addExhibition);

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã—Å—Ç–∞–≤–æ–∫
            document.getElementById('saveExhibitions').addEventListener('click', async () => {
                const exhibitions = [];

                // –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã—Å—Ç–∞–≤–∫–∏
                if (config.exhibitions) {
                    config.exhibitions.forEach(exhibition => {
                        exhibitions.push({
                            name: exhibition.name,
                            description: exhibition.description,
                            photo: exhibition.photo,
                            price: exhibition.price,
                            tickets: exhibition.tickets
                        });
                    });
                }

                // –ó–∞—Ç–µ–º —Å–æ–±–∏—Ä–∞–µ–º –Ω–æ–≤—ã–µ –≤—ã—Å—Ç–∞–≤–∫–∏ —Ç–æ–ª—å–∫–æ –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                document.querySelectorAll('.exhibition-item').forEach((item) => {
                    const photoInput = item.querySelector('.exhibition-photo');
                    const titleInput = item.querySelector('.exhibition-title');
                    const descriptionInput = item.querySelector('.exhibition-description');
                    const priceInput = item.querySelector('.exhibition-price');
                    const ticketsInput = item.querySelector('.exhibition-tickets');

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å –Ω–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    if (titleInput) {
                        const photo = photoInput ? photoInput.value : '';
                        const title = titleInput.value;
                        const description = descriptionInput ? descriptionInput.value : '';
                        const price = parseFloat(priceInput ? priceInput.value : 0) || 0;
                        const tickets = parseInt(ticketsInput ? ticketsInput.value : 0) || 0;

                        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≤—ã—Å—Ç–∞–≤–∫—É, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 3
                        if (title && exhibitions.length < 3) {
                            exhibitions.push({
                                name: title,
                                description: description,
                                photo: photo,
                                price: price,
                                tickets: tickets
                            });
                        }
                    }
                });

                try {
                    const response = await fetch(`/updateExhibtions/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ exhibitions })
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–í—ã—Å—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã");
                        closeModal('.modal-exhibition');
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            });
        }


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¢—Ä–µ–π–¥
        async function loadTradeSettings() {
            const container = document.getElementById('promo-settings');
            const params = new URLSearchParams(window.location.search);
            const promocodeId = params.get('promocodeId');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            let config;
            let promocodeData;
            try {
                const response = await fetch(`/promocode/${promocodeId}`);
                promocodeData = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', promocodeData);

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
                try {
                    config = JSON.parse(promocodeData.config);
                    console.log('–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:', config);
                } catch (jsonError) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', jsonError);
                    alert('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏');
                    return;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                return;
            }

            container.innerHTML = `
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢—Ä–µ–π–¥</h2>
                <label>–Ø–∑—ã–∫ —Å–∞–π—Ç–∞</label>
                <select id="language">
                    <option value="EN">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π EN</option>
                    <option value="DE">–ù–µ–º–µ—Ü–∫–∏–π DE</option>
                    <option value="RU">–†—É—Å—Å–∫–∏–π RU</option>
                    <option value="UA">–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π UA</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–π AZ</option>
                </select>
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="currency">
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="RUB">RUB</option>                      
                    <option value="UAH">UAH</option>
                    <option value="AED">AED</option>
                    <option value="KZT">KZT</option>
                    <option value="AZN">AZN</option>                    
                </select>
                <button class="save-button" id="saveSettingsTrade">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
                <button id="manageMammothsBtn">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º–∏</button>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                <div id="manageMammothsModal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º–∏</h2>
                        
                        <!-- –ü–æ–ª–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                        <input type="text" id="searchUserInput" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                        <button id="searchUserBtn">–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                        
                        <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                        <ul id="userList"></ul>
                    </div>
                </div>
            `;

            document.getElementById('language').value = config.language;
            document.getElementById('currency').value = config.currency;
            document.getElementById('manageMammothsBtn').addEventListener('click', openModal);
            document.getElementById('searchUserBtn').addEventListener('click', searchUser);

            const modal = document.getElementById('manageMammothsModal');
            const closeModal = document.querySelector('.close');

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            function openModal() {
                modal.style.display = 'block';
                loadUsers(); 
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            closeModal.onclick = function () {
                modal.style.display = 'none';
            };

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
            window.onclick = function (event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            };

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            async function loadUsers() {
                const userList = document.getElementById('userList');

                // –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç userList
                if (!userList) {
                    console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }

                const params = new URLSearchParams(window.location.search);
                const promocodeId = params.get('promocodeId');
                let promocodeData;

                try {
                    const response = await fetch(`/promocode/${promocodeId}`);
                    promocodeData = await response.json();

                    const refererId = promocodeData.user_id;
                    if (!refererId) {
                        console.error('ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ');
                        alert('ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                        return;
                    }

                    const usersResponse = await fetch(`/promo_get_trade_users/${refererId}`);
                    const data = await usersResponse.json();

                    // –û—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    userList.innerHTML = '';

                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫
                    for (const [userId, user] of Object.entries(data.users)) {
                        const li = document.createElement('li');
                        li.innerHTML = `ID: ${userId}, Username: ${user.username} <button class="selectUserBtn" data-id="${userId}">–í—ã–±—Ä–∞—Ç—å</button>`;
                        userList.appendChild(li);

                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        li.querySelector('.selectUserBtn').addEventListener('click', () => openUserMenu(userId));
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
                }
            }


            // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
            async function searchUser() {
                const searchInput = document.getElementById('searchUserInput').value;
                if (searchInput) {
                    openUserMenu(searchInput); // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                } else {
                    alert('–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }
            }


            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
            async function openUserMenu(userId) {
                try {
                    const response = await fetch(`/promo_trade_get_user/${userId}`);
                    if (!response.ok) {
                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:', response.statusText);
                        alert('–¢–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç!');
                        return false;  // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false
                    }

                    const userData = await response.json();

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    if (!userData || !userData.username) {
                        console.error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                        return false;  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false
                    }

                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                    const userMenu = document.createElement('div');
                    userMenu.className = 'user-menu';
                    userMenu.innerHTML = `
                        <button id="backToListBtn">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>  <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
                        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${userData.username}</h3>
                        <label><strong>–ë–∞–ª–∞–Ω—Å:</strong></label>
                        <input type="number" id="balanceInput" value="${userData.balance}">
                        <label><strong>–ú–∏–Ω. –≤—ã–≤–æ–¥:</strong></label>
                        <input type="number" id="minWithdrawInput" value="${userData.min_withdraw}">
                        <label><strong>–£–¥–∞—á–∞:</strong></label>
                        <div class="luck-container">
                            <input type="range" id="luckSlider" min="0" max="100" value="${userData.luck}">
                            <span id="luckValue">${userData.luck}%</span>
                        </div>
                        <!-- –¢—É–º–±–ª–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                        <label><strong>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong></label>
                        <label class="switch">
                            <input type="checkbox" id="isBlockedCheckbox" ${userData.is_blocked ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                        <!-- –¢—É–º–±–ª–µ—Ä –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                        <label><strong>–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω:</strong></label>
                        <label class="switch">
                            <input type="checkbox" id="isVerifiedCheckbox" ${userData.is_verified ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                        <!-- –¢—É–º–±–ª–µ—Ä —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤—ã–≤–æ–¥–∞ -->
                        <label><strong>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞:</strong></label>
                        <label class="switch">
                            <input type="checkbox" id="isWithdrawCheckbox" ${userData.is_withdraw ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                        
                        <button id="saveUserChangesBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        <button id="viewUserStatsBtn">–û—Ç–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
                    `;

                    // –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    modal.querySelector('.modal-content').innerHTML = '';
                    modal.querySelector('.modal-content').appendChild(userMenu);

                    // –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    document.getElementById('backToListBtn').addEventListener('click', async () => {
                        // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        modal.querySelector('.modal-content').innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                        
                        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                        const header = document.createElement('h2');
                        header.innerText = '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏';
                        
                        const searchInput = document.createElement('input');
                        searchInput.type = 'text';
                        searchInput.id = 'searchUserInput';
                        searchInput.placeholder = '–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
                        
                        const searchButton = document.createElement('button');
                        searchButton.id = 'searchUserBtn';
                        searchButton.innerText = '–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
                        
                        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        const newUserList = document.createElement('ul');
                        newUserList.id = 'userList';
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                        const modalContent = modal.querySelector('.modal-content');
                        modalContent.appendChild(header);
                        modalContent.appendChild(searchInput);
                        modalContent.appendChild(searchButton);
                        modalContent.appendChild(newUserList);
                        
                        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        await loadUsers(); // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

                        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∫ –∫–Ω–æ–ø–∫–µ –ø–æ–∏—Å–∫–∞
                        searchButton.addEventListener('click', searchUser);
                    });


                    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ —Å–ª–∞–π–¥–µ—Ä–∞
                    document.getElementById('luckSlider').addEventListener('input', function () {
                        document.getElementById('luckValue').innerText = `${this.value}%`;
                    });

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    document.getElementById('saveUserChangesBtn').addEventListener('click', async () => {
                        await saveUserChanges(userId);
                    });

                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    document.getElementById('viewUserStatsBtn').addEventListener('click', async () => {
                        await viewUserStatistics(userId);
                    });

                    return true;  // –ï—Å–ª–∏ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true

                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ');
                    return false;  // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false
                }
            }



            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            async function saveUserChanges(userId) {
                const balance = document.getElementById('balanceInput').value;
                const minWithdraw = document.getElementById('minWithdrawInput').value;
                const luck = document.getElementById('luckSlider').value;
                const isBlocked = document.getElementById('isBlockedCheckbox').checked;
                const isVerified = document.getElementById('isVerifiedCheckbox').checked;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç isWithdrawCheckbox
                let isWithdraw = false;
                const isWithdrawCheckbox = document.getElementById('isWithdrawCheckbox');
                if (isWithdrawCheckbox) {
                    isWithdraw = isWithdrawCheckbox.checked;
                }

                const updatedUserData = {
                    balance: balance,
                    min_withdraw: minWithdraw,
                    luck: luck,
                    is_blocked: isBlocked,
                    is_verified: isVerified,
                    is_withdraw: isWithdraw  // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                };

                try {
                    const response = await fetch(`/promo_trade_update_user/${userId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(updatedUserData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                    } else {
                        alert('–û—à–∏–±–∫–∞: ' + result.message);
                    }
                } catch (error) {
                    alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
                }
            }



            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            async function viewUserStatistics(userId) {
                try {
                    const response = await fetch(`/promo_trade_user_stats/${userId}`);
                    const statsData = await response.json();

                    const statsMenu = document.createElement('div');
                    statsMenu.className = 'user-stats';
                    statsMenu.innerHTML = `
                        <button id="backToListBtn">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>  <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${statsData.username}</h3>
                        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫:</strong> ${statsData.trades_count}</p>
                        <p><strong>–û–±—â–∞—è —Å—É–º–º–∞ —Å–¥–µ–ª–æ–∫:</strong> ${statsData.total_trade_amount}</p>
                        <p><strong>–í—ã–∏–≥—Ä–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏:</strong> ${statsData.won_trades}</p>
                        <p><strong>–ü—Ä–æ–∏–≥—Ä–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏:</strong> ${statsData.lost_trades}</p>
                    `;

                    // –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    modal.querySelector('.modal-content').innerHTML = '';
                    modal.querySelector('.modal-content').appendChild(statsMenu);

                    // –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    document.getElementById('backToListBtn').addEventListener('click', async () => {
                        // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        modal.querySelector('.modal-content').innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                        
                        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                        const header = document.createElement('h2');
                        header.innerText = '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏';
                        
                        const searchInput = document.createElement('input');
                        searchInput.type = 'text';
                        searchInput.id = 'searchUserInput';
                        searchInput.placeholder = '–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
                        
                        const searchButton = document.createElement('button');
                        searchButton.id = 'searchUserBtn';
                        searchButton.innerText = '–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
                        
                        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        const newUserList = document.createElement('ul');
                        newUserList.id = 'userList';
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                        const modalContent = modal.querySelector('.modal-content');
                        modalContent.appendChild(header);
                        modalContent.appendChild(searchInput);
                        modalContent.appendChild(searchButton);
                        modalContent.appendChild(newUserList);
                        
                        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        await loadUsers(); // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

                        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –∫ –∫–Ω–æ–ø–∫–µ –ø–æ–∏—Å–∫–∞
                        searchButton.addEventListener('click', searchUser);
                    });

                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏');
                }
            }



            document.getElementById('saveSettingsTrade').addEventListener('click', async () => {
                const language = document.getElementById('language').value;
                const currency = document.getElementById('currency').value;

                const settingsData = {
                    language: language,
                    currency: currency
                };

                try {
                    const response = await fetch(`/promocodeUpdateTrade/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ BlaBlaCar
        async function loadBlaBlaCarSettings() {
            const container = document.getElementById('promo-settings');
            const params = new URLSearchParams(window.location.search);
            const promocodeId = params.get('promocodeId');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            let config;
            let promocodeData;
            try {
                const response = await fetch(`/promocode/${promocodeId}`);
                promocodeData = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞:', promocodeData);

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
                try {
                    config = JSON.parse(promocodeData.config);
                    console.log('–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:', config);
                } catch (jsonError) {
                    console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', jsonError);
                    alert('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏');
                    return;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                return;
            }

            container.innerHTML = `
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ BlaBlaCar</h2>
                <label>–Ø–∑—ã–∫ —Å–∞–π—Ç–∞</label>
                <select id="language">
                    <option value="EN">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π EN</option>
                    <option value="DE">–ù–µ–º–µ—Ü–∫–∏–π DE</option>
                    <option value="RU">–†—É—Å—Å–∫–∏–π RU</option>
                    <option value="UA">–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π UA</option>
                    <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π KZ</option>
                    <option value="AZ">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–π AZ</option>
                </select>
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="currency">
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="RUB">RUB</option>                      
                    <option value="UAH">UAH</option>
                    <option value="AED">AED</option>
                    <option value="KZT">KZT</option>
                    <option value="AZN">AZN</option>                    
                </select>
                <button class="save-button" id="saveSettingsBlaBla">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                `;

        

            document.getElementById('language').value = config.language;
            document.getElementById('currency').value = config.currency;
            
            document.getElementById('saveSettingsBlaBla').addEventListener('click', async () => {
                const language = document.getElementById('language').value;
                const currency = document.getElementById('currency').value;

                const settingsData = {
                    language: language,
                    currency: currency
                };

                try {
                    const response = await fetch(`/promocodeUpdateTrade/${promocodeId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(settingsData)
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã");
                    } else {
                        alert("–û—à–∏–±–∫–∞: " + result.message);
                    }
                } catch (error) {
                    alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message);
                }
            });

        }
    
        
    </script>

</body>
</html>
